<?php
//echo "Current user id: ".$currenUserObj->getSession()['user_id'];
/*foreach ($numberExpUser as $row) {
    $userExpArray[] = $row->experimentID;
    //$userExpArray[] = $row;
    //echo '<br>---------------------------';
    //echo '<prev>',var_dump($row->experimentID),'</prev>';
}*/
/*foreach($userExpArray as $ro){
   echo '<br>Exp ID by user ID---------------------------';
    echo $ro;
}*/
require 'Views/template/header.phtml'

?>
<!-- Page Content  -->
<div id="content">






    <div class="header body-backgroundpoll">
        <div class="d-flex justify-content-between">
            <div class="p-2 align-self-center">
                <button type="button" id="sidebarCollapse" class="sidebutton-hover sidebutton">
                    <i class="fas fa-align-left"></i>
                    <span>Menu</span>
                </button>
            </div>
            <div class="p-2 align-self-center">
                <a class="dashboard">History</a>
            </div>
            <div class="p-2"></div>
        </div>
    </div>




    <div class="row ml-3 mr-3">

        <div class="col">
            <div class="dashboard3"> <a><i class="fa fa-check" aria-hidden="true"></i></a> Experiments done</div>
        </div>
    </div>

    <div class="row ml-3 mr-3">
        <?php
        //echo 'Hello';
        //$currenUserObj->countExperiment();
        $userExpArray[] = [];
        foreach ($numberExpUser as $row) {
            $userExpArray[] = $row->experimentID;
            //$userExpArray[] = $row;
            //echo '<br>---------------------------';
            //echo '<prev>',var_dump($row->experimentID),'</prev>';
        }
        foreach ($view->ExperimentDataSet as $row) {

            foreach ($userExpArray as $expNum) {
                //echo var_dump($row);
                // echo $row->getID();
                if ($expNum == $row->getID()) {
                    //echo $row->getID();

                    if ($row->getType() == 'Prototype') {
                        echo '
                    <div class="col">

                    <div class="container py-4">
                        <article class="postcard doneexp green">
                            <div class="postcard__text ">
                                <h1 class="postcard__title green "><a href="#">' . $row->getName() . '</a></h1>
                                <div class="postcard__subtitle small">
                                    <time datetime="2020-05-25 12:00:00">
                                        <i class="fas fa-calendar-alt mr-2"></i>' . $row->getDate() . '
                                    </time>
                                </div>
                                <div class="postcard__bar"></div>
                                <div class="postcard__preview-txt">' . $row->getDescription() . '</div>
                                <ul class="postcard__tagbox">
    
                                    <li class="tag__item"><i class="fas fa-tag mr-2 green2"></i>' . $row->getType() . '</li>
                                    <li class="tag__item"><i class="fas fa-clock mr-2"></i>' . $row->getTotalTime() . ' mins.</li>
                                    <li class="tag__item"><i class="fas fa-play mr-2"></i>' . $row->getType() . ' Completed!</li>
                                </ul>
                            </div>
                        </article></div></div>';
                    } elseif ($row->getType() == 'Survey') {
                        echo '<div class="col">
                    <div class="container py-4">
                        <article class="postcard doneexp red">
                            <div class="postcard__text">
                                <h1 class="postcard__title red"><a href="#">' . $row->getName() . '</a></h1>
                                <div class="postcard__subtitle small">
                                    <time datetime="2020-05-25 12:00:00">
                                        <i class="fas fa-calendar-alt mr-2"></i>' . $row->getDate() . '
                                    </time>
                                </div>
                                <div class="postcard__bar"></div>
                                <div class="postcard__preview-txt">' . $row->getDescription() . '</div>
                                <ul class="postcard__tagbox">
                                    <li class="tag__item"><i class="fas fa-tag mr-2 red2"></i>' . $row->getType() . '</li>
                                    <li class="tag__item"><i class="fas fa-clock mr-2"></i>' . $row->getTotalTime() . ' mins.</li>
                                    <li class="tag__item play red">
                                        <i class="fas fa-play mr-2"></i>' . $row->getType() . ' Completed!
                                    </li>
                                </ul>
                            </div>
                        </article></div>
                </div>';
                    } elseif ($row->getType() == 'Poll') {
                        echo '<div class="col">
                    <div class="container py-4">
                        <article class="postcard doneexp blue">
                            <div class="postcard__text">
                                <h1 class="postcard__title blue"><a href="#">' . $row->getName() . '</a></h1>
                                <div class="postcard__subtitle small">
                                    <time datetime="2020-05-25 12:00:00">
                                        <i class="fas fa-calendar-alt mr-2"></i>' . $row->getDate() . '
                                    </time>
                                </div>
                                <div class="postcard__bar"></div>
                                <div class="postcard__preview-txt">' . $row->getDescription() . '</div>
                                <ul class="postcard__tagbox">
                                    <li class="tag__item"><i class="fas fa-tag mr-2 blue2"></i>' . $row->getType() . '</li>
                                    <li class="tag__item"><i class="fas fa-clock mr-2"></i>' . $row->getTotalTime() . ' mins.</li>
                                    <li class="tag__item play blue">
                                        <a href="#"><i class="fas fa-play mr-2"></i>' . $row->getType() . ' Completed!</a>
                                    </li>
                                </ul>
                            </div>
                        </article></div></div>';
                    } elseif ($row->getType() == 'Discussion') {
                        echo '<div class="col">

                    <div class="container py-4">
                        <article class="postcard doneexp yellow">
                            <div class="postcard__text">
                                <h1 class="postcard__title yellow"><a href="#">' . $row->getName() . '</a></h1>
                                <div class="postcard__subtitle small">
                                    <time datetime="2020-05-25 12:00:00">
                                        <i class="fas fa-calendar-alt mr-2"></i>' . $row->getDate() . '
                                    </time>
                                </div>
                                <div class="postcard__bar"></div>
                                <div class="postcard__preview-txt">' . $row->getDescription() . '</div>
                                <ul class="postcard__tagbox">
                                    <li class="tag__item"><i class="fas fa-tag mr-2 yellow2"></i>' . $row->getType() . '</li>
                                    <li class="tag__item"><i class="fas fa-clock mr-2"></i>' . $row->getTotalTime() . ' mins.</li>
                                    <li class="tag__item play yellow">
                                        <a href="#"><i class="fas fa-play mr-2"></i>' . $row->getType() . ' Completed!</a>
                                    </li>
                                </ul>
                            </div>
                        </article></div>
                </div>';
                    }
                }
            }
        }
        ?>
    </div>
</div>









<!-- jQuery CDN - Slim version (=without AJAX) -->

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

<!-- Popper.JS -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>

<!-- Bootstrap JS -->

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>



<script type="text/javascript">
    $(document).ready(function() {

        $('#sidebarCollapse').on('click', function() {

            $('#sidebar').toggleClass('active');

        });

    });
</script>




</div>
</body>

</html>